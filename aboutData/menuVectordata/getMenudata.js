const mongoose = require('mongoose');
const Menu = require('../../models/Menu');
const fs = require('fs');
require('dotenv').config();

const menuIdsShouldbeRemoved = [
  "686a400ce74533f75001beb0",
  "686a400ce74533f75001beb2",
  "686a400ce74533f75001beb1",
  "686a400ce74533f75001bece",
  "686a400ce74533f75001bed0",
  "686a400ce74533f75001bed2",
  "686a400ce74533f75001bed1",
  "686a400ce74533f75001becf",
  "686a400ce74533f75001bed3",
  "686a400ce74533f75001befe",
  "686a400ce74533f75001beff",
  "686a400ce74533f75001bf0d",
  "686a400ce74533f75001bf0e",
  "686a400ce74533f75001bf0f",
  "686a400ce74533f75001bf45",
  "686a400ce74533f75001bf46",
  "686a400ce74533f75001bf42",
  "686a400ce74533f75001bf43",
  "686a400ce74533f75001bf44",
  "686a400ce74533f75001bf8d",
  "686a400ce74533f75001bf91",
  "686a400ce74533f75001bf8f",
  "686a400ce74533f75001bf90",
  "686a400ce74533f75001bf8e",
  "686a400ce74533f75001bfc2",
  "686a400ce74533f75001bfb3",
  "686a400ce74533f75001bfc3",
  "686a400ce74533f75001bfc5",
  "686a400ce74533f75001bfc4",
  "686a400ce74533f75001c003",
  "686a400ce74533f75001c009",
  "686a400ce74533f75001c00d",
  "686a400ce74533f75001c011",
  "686a400ce74533f75001c015",
  "686a400ce74533f75001c019",
  "686a400ce74533f75001c01a",
  "686a400ce74533f75001c021",
  "686a400ce74533f75001c022",
  "686a400ce74533f75001c02b",
  "686a400ce74533f75001c02c",
  "686a400ce74533f75001c034",
  "686a400ce74533f75001c03e",
  "686a400ce74533f75001bfe1",
  "686a400ce74533f75001c00c",
  "686a400ce74533f75001c013",
  "686a400ce74533f75001c016",
  "686a400ce74533f75001c01c",
  "686a400ce74533f75001c01f",
  "686a400ce74533f75001c030",
  "686a400ce74533f75001c031",
  "686a400ce74533f75001c032",
  "686a400ce74533f75001c035",
  "686a400ce74533f75001c036",
  "686a400ce74533f75001c037",
  "686a400ce74533f75001c038",
  "686a400ce74533f75001c039",
  "686a400ce74533f75001c002",
  "686a400ce74533f75001c008",
  "686a400ce74533f75001c00b",
  "686a400ce74533f75001c00e",
  "686a400ce74533f75001c00f",
  "686a400ce74533f75001c010",
  "686a400ce74533f75001c012",
  "686a400ce74533f75001c017",
  "686a400ce74533f75001c01b",
  "686a400ce74533f75001c023",
  "686a400ce74533f75001c025",
  "686a400ce74533f75001c027",
  "686a400ce74533f75001c028",
  "686a400ce74533f75001c029",
  "686a400ce74533f75001c02a",
  "686a400ce74533f75001c02e",
  "686a400ce74533f75001c03a",
  "686a400ce74533f75001c03b",
  "686a400ce74533f75001c00a",
  "686a400ce74533f75001c014",
  "686a400ce74533f75001c018",
  "686a400ce74533f75001c01d",
  "686a400ce74533f75001c01e",
  "686a400ce74533f75001c020",
  "686a400ce74533f75001c024",
  "686a400ce74533f75001c026",
  "686a400ce74533f75001c02d",
  "686a400ce74533f75001c02f",
  "686a400ce74533f75001c033",
  "686a400ce74533f75001c03c",
  "686a400ce74533f75001c03d",
  "686a400de74533f75001c054",
  "686a400de74533f75001c055",
  "686a400de74533f75001c053",
  "686a400de74533f75001c056",
  "686a400de74533f75001c057",
  "686a400de74533f75001c084",
  "686a400de74533f75001c085",
  "686a400de74533f75001c083",
  "686a400de74533f75001c0b9",
  "686a400de74533f75001c0b8",
  "686a400de74533f75001c0ba",
  "686a400de74533f75001c0bc",
  "686a400de74533f75001c0bb",
  "686a400de74533f75001c0e3",
  "686a400de74533f75001c0e2",
  "686a400de74533f75001c0e4",
  "686a400de74533f75001c0e1",
  "686a400de74533f75001c0e0",
  "686a400ee74533f75001c216",
  "686a400ee74533f75001c217",
  "686a400ee74533f75001c252",
  "686a400ee74533f75001c253",
  "686a400ee74533f75001c254",
  "686a400ee74533f75001c255",
  "686a400ee74533f75001c256",
  "686a400ee74533f75001c2ac",
  "686a400ee74533f75001c2ad",
  "686a400ee74533f75001c2ae",
  "686a400ee74533f75001c2d7",
  "686a400ee74533f75001c2d9",
  "686a400ee74533f75001c2da",
  "686a400ee74533f75001c2d8",
  "686a400ee74533f75001c2db",
  "686a400ee74533f75001c2fb",
  "686a400ee74533f75001c2fc",
  "686a400ee74533f75001c2fa",
  "6873de543184c19de8dd0201",
  "6873de543184c19de8dd0203",
  "6873de543184c19de8dd0205",
  "6873de553184c19de8dd024f",
  "6873de553184c19de8dd0251",
  "6873e4e40f28b2e9899ac0a4",
  "6873e4e40f28b2e9899ac0a6",
  "6873e4e40f28b2e9899ac0a8",
  "6873e4e40f28b2e9899ac0aa",
  "6873e4e50f28b2e9899ac117",
  "6873e4e50f28b2e9899ac11d",
  "6873e4e30f28b2e9899abff5",
  "6873e4e30f28b2e9899abff7",
  "6873e4e30f28b2e9899abff9",
  "6873e4e30f28b2e9899abffb",
  "6873e4e30f28b2e9899abffd",
  "686a400ce74533f75001bff6",
  "686a400ce74533f75001c03f",
  "686a400ce74533f75001c042",
  "686a400ce74533f75001c043",
  "686a400ce74533f75001bffa",
  "686a400ce74533f75001bffc",
  "686a400ce74533f75001c041",
  "686a400ce74533f75001c040",
  "686a400ce74533f75001bffb",
  "686a400ce74533f75001bffe",
  "686a400ee74533f75001c1f2",
  "686a400ee74533f75001c1f3",
  "686a400ee74533f75001c1f5",
  "686a400ee74533f75001c1f6",
  "686a400ee74533f75001c1fa",
  "686a400ee74533f75001c1ee",
  "686a400ee74533f75001c1ef",
  "686a400ee74533f75001c1f4",
  "686a400ee74533f75001c1ec",
  "686a400ee74533f75001c1ed",
  "686a400ee74533f75001c1f8",
  "686a400ee74533f75001c1f0",
  "686a400ee74533f75001c1f1",
  "686a400ee74533f75001c1f7",
  "686a400ee74533f75001c1f9",
  "686a400ee74533f75001c218",
  "686a400ce74533f75001bf3e",
  "686a400ce74533f75001bf3f",
  "686a400ce74533f75001bf40",
  "686a400ce74533f75001bf41",
  "686a400ce74533f75001bf3d",
  "686a400de74533f75001c09b",
  "686a400de74533f75001c15c",
  "6873e4e40f28b2e9899ac09a",
  "6873e4e40f28b2e9899ac09c",
  "6873e4e40f28b2e9899ac0a0",
  "6873e4e40f28b2e9899ac0a2",
];

async function exportMenuData() {
  await mongoose.connect(process.env.DB_URL);
  // menuIdsShouldbeRemoved에 없는 메뉴만 추출
  const menus = await Menu.find({
    _id: { $nin: menuIdsShouldbeRemoved }
  }, { _id: 1, name: 1, price: 1 }).lean();
  fs.writeFileSync(__dirname + '/menu_id_name_price.json', JSON.stringify(menus, null, 2), 'utf-8');
  console.log('저장 완료: menu_id_name_price.json');
  await mongoose.disconnect();
}

exportMenuData();
